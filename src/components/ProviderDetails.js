import React, { useState , useEffect, useRef } from "react";import {	View,	Text,	Image,	TouchableOpacity,	ImageBackground,	KeyboardAvoidingView,	I18nManager,	Dimensions,	FlatList,	Platform,	Share,	Linking,} from "react-native";import {Container, Button, Form, Input, Toast, Header, Right, Left, Body, Icon, Content} from 'native-base'import styles from '../../assets/styles'import Swiper from 'react-native-swiper';import i18n from "../../locale/i18n";import StarRating from "react-native-star-rating";import COLORS from "../consts/colors";import { useDispatch, useSelector } from 'react-redux'import {ScrollView} from "react-native-web";import * as Animatable from "react-native-animatable";const width	 		= Dimensions.get('window').width;const height 		= Dimensions.get('window').height;const isIOS  		= Platform.OS === 'ios';const IS_IPHONE_X 	= (height === 812 || height === 896) && Platform.OS === 'ios';const images = [	require('../../assets/images/slider_1.png'),	require('../../assets/images/slider_2.png'),	require('../../assets/images/slider_3.png'),	require('../../assets/images/slider_4.png'),];const providers = [	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_1.jpg'), rate: 3, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_2.jpg'), rate: 5, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_3.jpg'), rate: 2, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_4.jpg'), rate: 4, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_3.jpg'), rate: 2, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_4.jpg'), rate: 4, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_3.jpg'), rate: 2, price: 500},	{id: 0, name: 'مؤسسة كشتة', category: 'سفاري', image: require('../../assets/images/prov_4.jpg'), rate: 4, price: 500},];function ProviderDetails({navigation, route}) {	const [showModal, setShowModal] = useState(false);	const [tripType, setTripType]   = useState('land');	function toggleModal() {		setShowModal(!showModal)	}	function selectType(type) {		setTripType(type)	}	function navigateToTripService() {		toggleModal();		navigation.navigate('tripServices', { tripType })	}	function _renderItem(item) {		return(			<View key={item.index} style={{ borderRadius: 10, overflow: 'hidden', height: 150, width: width*85/100}}>				<Image source={images[item.index]} resizeMode={'cover'} style={[ { height: 160, width: '100%', borderRadius: 10 }]}/>			</View>		)	}	const onShare = async () => {		try {			const result = await Share.share({				message:					'Safari App',			});			if (result.action === Share.sharedAction) {				if (result.activityType) {					// shared with activity type of result.activityType				} else {					// shared				}			} else if (result.action === Share.dismissedAction) {				// dismissed			}		} catch (error) {			alert(error.message);		}	};	function Item({ name , image , rate , index, category , price }) {		return (			<TouchableOpacity key={'_' + index} style={{ borderRadius: 10, height: 170, width: '47%', margin: 5, overflow: 'hidden',}} onPress={() => navigation.navigate('serviceDetails')}>				<ImageBackground source={image} resizeMode={'cover'} style={{ height: 170, width: '100%', borderRadius: 10 }}>					<View style={[styles.overlay_black , styles.Width_100, { zIndex: 0, height: 200, position: 'absolute' }]} />					<TouchableOpacity style={{ alignSelf: "flex-end", padding: 10 }} >						<Icon type={'AntDesign'} name={'heart'} style={{ color: COLORS.orange, fontSize: 20 }} />					</TouchableOpacity>					<View style={{ bottom: 0, position: 'absolute', height: 60, paddingHorizontal: 10 }}>						<Text style={[ styles.textBold, styles.text_White, styles.textSize_16, styles._alignText, styles.Width_100 ]}>{ name }</Text>						<Text style={[ styles.textBold, styles.text_orange, styles._alignText, styles.textRight ]}>{ price } { i18n.t('RS') } </Text>					</View>				</ImageBackground>			</TouchableOpacity>		);	}	return (		<Container>			<View>				<View style={{ flexDirection: 'row', justifyCenter: 'space-between', position: 'absolute', width: '100%', height: 100, zIndex: 1, marginTop: 30 }}>					<TouchableOpacity style={{ left: 20 }}>						<Image source={require('../../assets/images/white_back.png')} style={[ styles.transform, { width: 25, height: 25, marginTop: 10 }]} resizeMode={'contain'}/>					</TouchableOpacity>					<TouchableOpacity onPress={() => onShare()} style={{ position: 'absolute', right: 20}}>						<Image source={require('../../assets/images/share.png')} style={{ width: 25, height: 25, marginTop: 10 }} resizeMode={'contain'}/>					</TouchableOpacity>				</View>				<View style={{ width: '100%', height: IS_IPHONE_X ? 400 : 330 }}>					<Swiper dotStyle={[styles.doteStyle2]}						activeDotStyle={[styles.activeDot2]}						key={3}						containerStyle={{ height: 300 }}						style={{ flexDirection: isIOS && I18nManager.isRTL  ? 'row' : 'row-reverse' }}						autoplay={true} loop={true}>						{							providers.map((provider, i) => (								<View key={i} style={{ }}>									<View style={[styles.overlay_black , styles.Width_100, { zIndex: 1, height: 400, position: 'absolute' }]} />									<Image source={provider.image} style={{ width: '100%', height: height*40/100, alignSelf: 'center' }} resizeMode={'cover'}/>								</View>							))						}					</Swiper>				</View>				<View style={{ width: '100%', height: 135, borderTopRightRadius: 40, backgroundColor: COLORS.blue, marginTop: -100, flexDirection: 'row', padding: 15 }}>					<View>						<Text style={[styles.textBold, styles.textSize_22, styles.text_White]}>{ i18n.t('providerInfo') }</Text>						<View style={{ width: 120 }}>							<StarRating								disabled={false}								maxStars={5}								rating={4}								// selectedStar={(rating) => onStarRatingPress(rating)}								fullStarColor={COLORS.orange}								emptyStarColor={COLORS.light_gray}								starSize={20}							/>						</View>					</View>					<TouchableOpacity onPress={() => Linking.openURL('https://api.whatsapp.com/send?phone=01094985095')} style={{ flexDirection: 'row', position: 'absolute', right: 20, top: 35 }}>						<Image source={require('../../assets/images/whatsapp.png')} style={{ width: 30, height: 30, marginHorizontal: 10 }}/>						<Text style={[styles.textRegular, styles.textSize_16, styles.text_White]}>{ i18n.t('contactUs') }</Text>					</TouchableOpacity>				</View>				<View style={{ width: '100%', height: height*56/100, borderTopRightRadius: 50, backgroundColor: '#fff', marginTop: -45, flexDirection: 'row', padding: 15, marginBottom: 50 }}>					<FlatList						data={providers}						renderItem={({ item , index}) => <Item						name={item.name}						index={index}						image={item.image}						category={item.category}						rate={item.rate}						price={item.price}						id={item.id}						/>}						keyExtractor={item => item.id}						numColumns={2}						horizontal={false}						columnWrapperStyle={[styles.directionRowCenter]}						// extraData={isFav}					/>				</View>				<View style={{ height: 30, width: '100%' }} />			</View>		</Container>	)}export default ProviderDetails;